<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: index.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: index.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/** @function getMovies
   * @param {path} path 받아오고자 하는 영화의 종류
   * @param {position} position 카드리리스트 배열의 위치
   */
getMovies: async (path, position) => {
    let movies = [];

    await fetch(`${BASE_URL}/movie/${path}?api_key=${API_KEY}&amp;language=ko`)
        .then((res) => res.json())
        .then((data) => movies = data.results)
        .catch((err) => console.error('API 에러: ', err));

    const createList = movies.slice(0, 3).map((movie) => {

        const imageUrl = `https://image.tmdb.org/t/p/w200/${movie.poster_path}`;
        return `&lt;li class="event-li hover:scale-[1.15] transition duration-700" data-id="${movie.id}">
             &lt;div class="poster" style="background-image: url(${imageUrl});">&lt;/div>
             &lt;h3 class="poster-title dark:text-white">${movie.title}&lt;/h3>
            &lt;/li>`;
    });

    document.querySelectorAll('.card-list')[position].innerHTML = createList;

    document.querySelectorAll('.card-list')[0].addEventListener('click', (event) => {
        movieApi.getDetail(event.target.parentNode.dataset.id);
    });

    document.querySelectorAll('.card-list')[1].addEventListener('click', (event) => {
        movieApi.getDetail(event.target.parentNode.dataset.id);
    });
};

 /** function getDetail
     * 카드를 클릭했을 때 우측 화면에 detail 값들을 렌더린 해주는 함수
     * @param {*} movieId 내재되어있던 ID 값
     */
 getDetail: async (movieId) => {
    let movieTitle;
    let content;
    let rating;
    let backBgPath;
    let posterBgPath;

    await fetch(`${BASE_URL}/movie/${movieId}?api_key=${API_KEY}&amp;language=ko`)
        .then((res) => res.json())
        .then(({ title, overview, vote_average, poster_path, backdrop_path }) => {
            movieTitle = title;
            content = overview;
            rating = vote_average;
            posterBgPath = BASE_IMG_URL + poster_path;
            backBgPath = BASE_IMG_URL + backdrop_path;
        })
        .catch((err) => console.error(err));

    // 배경 이미지 html 설계 오류 - 수정 필요
    // &lt;div class="rt-poster-container" style="background-image: url(${backBgPath})">&lt;/div>
    /** function contentlimit
     * @param {*} content 길이를 제한하고자 하는 string 
     * @returns {string} 90자 이하의 string
     */
    function contentlimit(content){
      if(content.length>90){
        return content = content.substr(0,90) + '...';
      } else{
        return content
      }
    }
    const template = `&lt;div class="rt-poster-container">
    &lt;div class="rt-poster" style="background-image: url(${posterBgPath})">&lt;/div>
    &lt;div class="rt-poster-detail">
      &lt;div class="rt-poster-detail__title">
        &lt;p>${movieTitle}&lt;/p>
      &lt;/div>
      &lt;div class="rt-poster-detail__description">
        &lt;p>
         ${contentlimit(content)}
        &lt;/p>
      &lt;/div>
      &lt;div class="rt-poster-detail-plus">
        &lt;div class="rt-poster-detail-plus__star">
          &lt;i class="fa-solid fa-star fa-xs">&lt;/i> ${rating.toFixed(1)}/10
        &lt;/div>
        &lt;div class="rt-poster-detail-plus__distribution">
          &lt;p>&lt;/p>
        &lt;/div>
      &lt;/div>
    &lt;/div>
  &lt;/div>`;
    document.querySelector('.container-rt').innerHTML = template;
};</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#getMovies">getMovies</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Thu May 04 2023 10:19:11 GMT+0900 (대한민국 표준시)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
